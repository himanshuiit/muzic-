{"version":3,"sources":["../../server/routes/signUp.js"],"names":["router","Router","SECRET","process","env","post","req","res","name","body","email","facebook","password","saltRounds","hash","then","query","error","result","response","send","user","id","insertId","token","sign","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;AAFA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;AACA,IAAMC,SAASC,QAAQC,GAAR,CAAYF,MAA3B;;AAEA;AACAF,OAAOK,IAAP,CAAY,cAAZ,EAA4B,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC9C;AACA,KAAIC,OAAOF,IAAIG,IAAJ,CAASD,IAApB;AACA,KAAIE,QAAQJ,IAAIG,IAAJ,CAASC,KAArB;AACA,KAAIC,WAAWL,IAAIG,IAAJ,CAASE,QAAxB;AACA,KAAIC,WAAWN,IAAIG,IAAJ,CAASG,QAAxB;;AAEA,KAAMC,aAAa,EAAnB;AACA,kBAAOC,IAAP,CAAYF,QAAZ,EAAsBC,UAAtB,EAAkCE,IAAlC,CAAuC,UAASD,IAAT,EAAe;AACrD,eAAWE,KAAX,CAAiB,sFAAjB,EAAyG,CAACR,IAAD,EAAOE,KAAP,EAAcI,IAAd,EAAoBH,QAApB,CAAzG,EAAwI,UAASM,KAAT,EAAgBC,MAAhB,EAAwB;AAC/J,OAAID,KAAJ,EAAW;AACV,QAAIE,WAAW;AACd,aAAQ,GADM;AAEd,gBAAW;AAFG,KAAf;AAIAZ,QAAIa,IAAJ,CAASD,QAAT;AACA,IAND,MAMO;AACN,QAAIE,OAAO;AACVC,SAAIJ,OAAOK,QADD;AAEVf,WAAMA,IAFI;AAGVE,YAAOA,KAHG;AAIVC,eAAUA;AAJA,KAAX;;AAOA,QAAIa,QAAQ,uBAAIC,IAAJ,CAASJ,IAAT,EAAenB,MAAf,EAAuB,EAAvB,CAAZ;AACA,QAAIiB,YAAW;AACd,cAASK,KADK;AAEd,aAAQ,GAFM;AAGd,gBAAW;AAHG,KAAf;;AAMAjB,QAAIa,IAAJ,CAASD,SAAT;AACA;AACD,GAxBD;AAyBA,EA1BD;AA4BA,CApCD;AAqCAO,OAAOC,OAAP,GAAiB3B,MAAjB","file":"signUp.js","sourcesContent":["import express from 'express';\r\nimport bcrypt from 'bcrypt';\r\nimport jwt from 'jsonwebtoken';\r\nimport connection from '../db';\r\nconst router = express.Router();\r\nconst SECRET = process.env.SECRET;\r\nimport 'dotenv/config';\r\n// console.log(\"hi this is me before the post function\");\r\nrouter.post('/user/signUp', function(req, res) {\r\n\t// console.log(\"hi this is me inside the post function\");\r\n\tlet name = req.body.name;\r\n\tlet email = req.body.email;\r\n\tlet facebook = req.body.facebook;\r\n\tlet password = req.body.password;\r\n\r\n\tconst saltRounds = 10;\r\n\tbcrypt.hash(password, saltRounds).then(function(hash) {\r\n\t\tconnection.query('INSERT INTO user (user_name,user_email,user_password,user_facebook) VALUES (?,?,?,?)', [name, email, hash, facebook], function(error, result) {\r\n\t\t\tif (error) {\r\n\t\t\t\tlet response = {\r\n\t\t\t\t\t'code': 404,\r\n\t\t\t\t\t'message': 'wrong request'\r\n\t\t\t\t};\r\n\t\t\t\tres.send(response);\r\n\t\t\t} else {\r\n\t\t\t\tlet user = {\r\n\t\t\t\t\tid: result.insertId,\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\temail: email,\r\n\t\t\t\t\tfacebook: facebook,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet token = jwt.sign(user, SECRET, {});\r\n\t\t\t\tlet response = {\r\n\t\t\t\t\t'token': token,\r\n\t\t\t\t\t'code': 201,\r\n\t\t\t\t\t'message': 'added user'\r\n\t\t\t\t};\r\n\r\n\t\t\t\tres.send(response);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n});\r\nmodule.exports = router;\r\n"]}